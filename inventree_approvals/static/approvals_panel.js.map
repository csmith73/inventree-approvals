{"version":3,"file":"approvals_panel.js","sources":["../frontend/node_modules/react-dom/client.js","../frontend/src/ApprovalHistory.tsx","../frontend/src/ApprovalModals.tsx","../frontend/src/ApprovalsPanel.tsx","../frontend/src/index.ts"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { Badge, Table, Text, Stack } from '@mantine/core';\nimport type { Approval, ApprovalStatus } from './types';\n\ninterface ApprovalHistoryProps {\n  approvals: Approval[];\n}\n\n/**\n * Get badge color and text for approval status\n */\nfunction getStatusBadge(status: ApprovalStatus): { color: string; label: string } {\n  switch (status) {\n    case 'approved':\n      return { color: 'green', label: '‚úì Approved' };\n    case 'rejected':\n      return { color: 'red', label: '‚úó Rejected' };\n    case 'pending':\n      return { color: 'yellow', label: '‚è≥ Pending' };\n    default:\n      return { color: 'gray', label: status };\n  }\n}\n\n/**\n * Format date string for display\n */\nfunction formatDate(dateStr: string | null): string {\n  if (!dateStr) return '-';\n  try {\n    return new Date(dateStr).toLocaleString();\n  } catch {\n    return dateStr;\n  }\n}\n\n/**\n * Component to display approval history in a table\n */\nexport function ApprovalHistory({ approvals }: ApprovalHistoryProps) {\n  if (approvals.length === 0) {\n    return (\n      <Text c=\"dimmed\" fs=\"italic\" size=\"sm\">\n        No approvals yet\n      </Text>\n    );\n  }\n\n  const rows = approvals.map((approval, index) => {\n    const { color, label } = getStatusBadge(approval.status);\n    \n    return (\n      <Table.Tr key={index}>\n        <Table.Td>Level {approval.level}</Table.Td>\n        <Table.Td>\n          <Badge color={color} variant=\"filled\" size=\"sm\">\n            {label}\n          </Badge>\n        </Table.Td>\n        <Table.Td>{approval.requested_by_name || '-'}</Table.Td>\n        <Table.Td>\n          {approval.status === 'pending'\n            ? approval.requested_approver_name || 'Any'\n            : approval.actual_approver_name || '-'}\n        </Table.Td>\n        <Table.Td>\n          <Text size=\"xs\" c=\"dimmed\">\n            {formatDate(approval.requested_at)}\n          </Text>\n        </Table.Td>\n        <Table.Td>\n          <Text size=\"xs\" c=\"dimmed\">\n            {approval.status !== 'pending' ? formatDate(approval.decided_at) : '-'}\n          </Text>\n        </Table.Td>\n      </Table.Tr>\n    );\n  });\n\n  return (\n    <Stack gap=\"xs\">\n      <Text fw={500} size=\"sm\">Approval History</Text>\n      <Table striped highlightOnHover withTableBorder withColumnBorders>\n        <Table.Thead>\n          <Table.Tr>\n            <Table.Th>Level</Table.Th>\n            <Table.Th>Status</Table.Th>\n            <Table.Th>Requested By</Table.Th>\n            <Table.Th>Approver</Table.Th>\n            <Table.Th>Requested</Table.Th>\n            <Table.Th>Decided</Table.Th>\n          </Table.Tr>\n        </Table.Thead>\n        <Table.Tbody>{rows}</Table.Tbody>\n      </Table>\n    </Stack>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport {\n  Modal,\n  Button,\n  Select,\n  Textarea,\n  Stack,\n  Group,\n  LoadingOverlay,\n  Alert,\n} from '@mantine/core';\nimport { IconAlertCircle } from '@tabler/icons-react';\nimport type {\n  ApproverUser,\n  ApproverUsersResponse,\n  RequestApprovalResponse,\n  ApprovalDecisionResponse,\n  PluginPanelProps,\n} from './types';\n\ninterface RequestModalProps {\n  opened: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n  orderId: number;\n  pluginSlug: string;\n  isHighValue: boolean;\n  api: PluginPanelProps['api'];\n}\n\n/**\n * Modal for requesting an approval\n */\nexport function RequestApprovalModal({\n  opened,\n  onClose,\n  onSuccess,\n  orderId,\n  pluginSlug,\n  isHighValue,\n  api,\n}: RequestModalProps) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [approvers, setApprovers] = useState<ApproverUser[]>([]);\n  const [selectedApprover, setSelectedApprover] = useState<string | null>(null);\n  const [notes, setNotes] = useState('');\n\n  // Fetch available approvers when modal opens\n  useEffect(() => {\n    if (opened) {\n      setError(null);\n      loadApprovers();\n    }\n  }, [opened]);\n\n  async function loadApprovers() {\n    try {\n      const params = isHighValue ? '?is_high_value=true' : '';\n      const response = await api.get<ApproverUsersResponse>(\n        `/plugin/${pluginSlug}/users/${params}`\n      );\n      setApprovers(response.results);\n    } catch (err) {\n      console.error('Failed to load approvers:', err);\n      setApprovers([]);\n    }\n  }\n\n  async function handleSubmit() {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await api.post<RequestApprovalResponse>(\n        `/plugin/${pluginSlug}/po/${orderId}/request/`,\n        {\n          approver_id: selectedApprover,\n          notes: notes,\n        }\n      );\n\n      if (response.success) {\n        setNotes('');\n        setSelectedApprover(null);\n        onSuccess();\n        onClose();\n      } else {\n        setError(response.error || 'Failed to request approval');\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Build select options\n  const approverOptions = [\n    { value: '', label: '-- Any Available Approver --' },\n    ...(!isHighValue ? [{ value: 'teams_channel', label: 'üì¢ Teams Purchasing Channel' }] : []),\n    ...approvers.map((user) => ({\n      value: String(user.id),\n      label: `${user.full_name} (${user.username})`,\n    })),\n  ];\n\n  return (\n    <Modal opened={opened} onClose={onClose} title=\"Request Approval\" size=\"md\">\n      <LoadingOverlay visible={loading} />\n      \n      <Stack gap=\"md\">\n        {error && (\n          <Alert color=\"red\" icon={<IconAlertCircle size={16} />}>\n            {error}\n          </Alert>\n        )}\n\n        <Select\n          label=\"Select Approver (optional)\"\n          placeholder=\"Select an approver\"\n          data={approverOptions}\n          value={selectedApprover}\n          onChange={setSelectedApprover}\n          clearable\n        />\n\n        <Textarea\n          label=\"Notes (optional)\"\n          placeholder=\"Add any notes for the approver\"\n          value={notes}\n          onChange={(e) => setNotes(e.currentTarget.value)}\n          rows={3}\n        />\n\n        <Group justify=\"flex-end\" gap=\"sm\">\n          <Button variant=\"default\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} loading={loading}>\n            Submit Request\n          </Button>\n        </Group>\n      </Stack>\n    </Modal>\n  );\n}\n\ninterface DecisionModalProps {\n  opened: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n  orderId: number;\n  pluginSlug: string;\n  isApprove: boolean;\n  api: PluginPanelProps['api'];\n}\n\n/**\n * Modal for approving or rejecting a request\n */\nexport function ApprovalDecisionModal({\n  opened,\n  onClose,\n  onSuccess,\n  orderId,\n  pluginSlug,\n  isApprove,\n  api,\n}: DecisionModalProps) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [notes, setNotes] = useState('');\n\n  useEffect(() => {\n    if (opened) {\n      setError(null);\n      setNotes('');\n    }\n  }, [opened]);\n\n  async function handleSubmit() {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const endpoint = isApprove ? 'approve' : 'reject';\n      const response = await api.post<ApprovalDecisionResponse>(\n        `/plugin/${pluginSlug}/po/${orderId}/${endpoint}/`,\n        { notes }\n      );\n\n      if (response.success) {\n        setNotes('');\n        onSuccess();\n        onClose();\n      } else {\n        setError(response.error || `Failed to ${isApprove ? 'approve' : 'reject'}`);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const title = isApprove ? 'Approve Request' : 'Reject Request';\n  const buttonColor = isApprove ? 'green' : 'red';\n  const buttonText = isApprove ? 'Approve' : 'Reject';\n\n  return (\n    <Modal opened={opened} onClose={onClose} title={title} size=\"md\">\n      <LoadingOverlay visible={loading} />\n      \n      <Stack gap=\"md\">\n        {error && (\n          <Alert color=\"red\" icon={<IconAlertCircle size={16} />}>\n            {error}\n          </Alert>\n        )}\n\n        <Textarea\n          label=\"Notes (optional)\"\n          placeholder={`Add any notes for ${isApprove ? 'approving' : 'rejecting'} this request`}\n          value={notes}\n          onChange={(e) => setNotes(e.currentTarget.value)}\n          rows={3}\n        />\n\n        <Group justify=\"flex-end\" gap=\"sm\">\n          <Button variant=\"default\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button color={buttonColor} onClick={handleSubmit} loading={loading}>\n            {buttonText}\n          </Button>\n        </Group>\n      </Stack>\n    </Modal>\n  );\n}\n","import { useState, useEffect, useCallback } from 'react';\nimport {\n  Stack,\n  Group,\n  Badge,\n  Button,\n  Alert,\n  Loader,\n  Paper,\n  Text,\n} from '@mantine/core';\nimport {\n  IconCheck,\n  IconX,\n  IconAlertTriangle,\n  IconFileDescription,\n} from '@tabler/icons-react';\nimport { ApprovalHistory } from './ApprovalHistory';\nimport { RequestApprovalModal, ApprovalDecisionModal } from './ApprovalModals';\nimport type { ApprovalStatusResponse, PluginPanelProps } from './types';\n\n/**\n * Main Approvals Panel component\n */\nexport function ApprovalsPanel(props: PluginPanelProps) {\n  const { context, api } = props;\n  const orderId = context?.order_id || props.target?.id;\n  const pluginSlug = context?.plugin_slug || 'approvals';\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [status, setStatus] = useState<ApprovalStatusResponse | null>(null);\n\n  // Modal states\n  const [requestModalOpen, setRequestModalOpen] = useState(false);\n  const [approveModalOpen, setApproveModalOpen] = useState(false);\n  const [rejectModalOpen, setRejectModalOpen] = useState(false);\n\n  /**\n   * Fetch approval status from the API\n   */\n  const fetchStatus = useCallback(async () => {\n    if (!orderId) {\n      setError('No order ID provided');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await api.get<ApprovalStatusResponse>(\n        `/plugin/${pluginSlug}/po/${orderId}/status/`\n      );\n      setStatus(response);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load approval status');\n    } finally {\n      setLoading(false);\n    }\n  }, [orderId, pluginSlug, api]);\n\n  // Fetch status on mount and when orderId changes\n  useEffect(() => {\n    fetchStatus();\n  }, [fetchStatus]);\n\n  /**\n   * Handle successful approval action\n   */\n  const handleSuccess = useCallback(() => {\n    fetchStatus();\n  }, [fetchStatus]);\n\n  // Loading state\n  if (loading && !status) {\n    return (\n      <Stack align=\"center\" p=\"md\">\n        <Loader size=\"md\" />\n        <Text size=\"sm\" c=\"dimmed\">Loading approval status...</Text>\n      </Stack>\n    );\n  }\n\n  // Error state\n  if (error && !status) {\n    return (\n      <Alert color=\"red\" title=\"Error\" icon={<IconAlertTriangle size={16} />}>\n        {error}\n      </Alert>\n    );\n  }\n\n  if (!status) {\n    return (\n      <Alert color=\"yellow\" title=\"No Data\">\n        Unable to load approval status\n      </Alert>\n    );\n  }\n\n  // Determine status badge color and text\n  let statusColor: string;\n  let statusText: string;\n  \n  if (status.is_fully_approved) {\n    statusColor = 'green';\n    statusText = '‚úì Approved';\n  } else if (status.has_pending) {\n    statusColor = 'yellow';\n    statusText = `${status.approved_count}/${status.total_required} (Pending)`;\n  } else {\n    statusColor = 'blue';\n    statusText = `${status.approved_count}/${status.total_required}`;\n  }\n\n  return (\n    <Stack gap=\"md\" p=\"md\">\n      {/* Header with status badge */}\n      <Group justify=\"space-between\" align=\"center\">\n        <Text fw={600} size=\"lg\">Approval Status</Text>\n        <Badge color={statusColor} variant=\"filled\" size=\"lg\">\n          {statusText}\n        </Badge>\n      </Group>\n\n      {/* High value warning */}\n      {status.is_high_value && (\n        <Alert \n          color=\"orange\" \n          icon={<IconAlertTriangle size={16} />}\n          title=\"High Value Order\"\n        >\n          This order requires approval from a senior approver\n        </Alert>\n      )}\n\n      {/* Approval history */}\n      <ApprovalHistory approvals={status.approvals} />\n\n      {/* Action buttons */}\n      <Group gap=\"sm\">\n        {status.can_request_approval && (\n          <Button\n            leftSection={<IconFileDescription size={16} />}\n            onClick={() => setRequestModalOpen(true)}\n          >\n            Request Approval\n          </Button>\n        )}\n\n        {status.user_can_approve && (\n          <>\n            <Button\n              color=\"green\"\n              leftSection={<IconCheck size={16} />}\n              onClick={() => setApproveModalOpen(true)}\n            >\n              Approve\n            </Button>\n            <Button\n              color=\"red\"\n              leftSection={<IconX size={16} />}\n              onClick={() => setRejectModalOpen(true)}\n            >\n              Reject\n            </Button>\n          </>\n        )}\n\n        {status.is_fully_approved && (\n          <Paper withBorder p=\"sm\" bg=\"green.0\">\n            <Group gap=\"xs\">\n              <IconCheck size={16} color=\"green\" />\n              <Text size=\"sm\" c=\"green.8\" fw={500}>\n                Order can now be placed\n              </Text>\n            </Group>\n          </Paper>\n        )}\n      </Group>\n\n      {/* Status reason if no actions available */}\n      {!status.can_request_approval && !status.user_can_approve && !status.is_fully_approved && (\n        <Text size=\"sm\" c=\"dimmed\">\n          {status.can_request_reason || status.user_can_approve_reason || 'Waiting for approval action'}\n        </Text>\n      )}\n\n      {/* Modals */}\n      <RequestApprovalModal\n        opened={requestModalOpen}\n        onClose={() => setRequestModalOpen(false)}\n        onSuccess={handleSuccess}\n        orderId={orderId}\n        pluginSlug={pluginSlug}\n        isHighValue={status.is_high_value}\n        api={api}\n      />\n\n      <ApprovalDecisionModal\n        opened={approveModalOpen}\n        onClose={() => setApproveModalOpen(false)}\n        onSuccess={handleSuccess}\n        orderId={orderId}\n        pluginSlug={pluginSlug}\n        isApprove={true}\n        api={api}\n      />\n\n      <ApprovalDecisionModal\n        opened={rejectModalOpen}\n        onClose={() => setRejectModalOpen(false)}\n        onSuccess={handleSuccess}\n        orderId={orderId}\n        pluginSlug={pluginSlug}\n        isApprove={false}\n        api={api}\n      />\n    </Stack>\n  );\n}\n","/**\n * InvenTree Approvals Plugin - Frontend Entry Point\n *\n * This file exports the render function that InvenTree's plugin system\n * uses to render the approvals panel.\n */\n\nimport { createElement } from 'react';\nimport { createRoot, Root } from 'react-dom/client';\nimport { ApprovalsPanel } from './ApprovalsPanel';\nimport type { PluginPanelProps } from './types';\n\n// Store root instances for cleanup\nconst roots = new WeakMap<HTMLElement, Root>();\n\n/**\n * Render the approvals panel into the target element.\n *\n * This function is called by the InvenTree UI plugin system.\n *\n * @param target - The HTMLElement to render the panel into\n * @param props - Plugin context passed from InvenTree\n */\nexport function renderPanel(target: HTMLElement, props: PluginPanelProps) {\n  // Clean up existing root if any\n  const existingRoot = roots.get(target);\n  if (existingRoot) {\n    existingRoot.unmount();\n  }\n\n  // Create new React root and render\n  const root = createRoot(target);\n  roots.set(target, root);\n\n  root.render(createElement(ApprovalsPanel, props));\n}\n\n/**\n * Check if the panel should be hidden for the given context.\n *\n * @param context - The context data from InvenTree\n * @returns true if the panel should be hidden\n */\nexport function isPanelHidden(context: { model?: string }): boolean {\n  // Only show for purchase orders\n  return context.model !== 'purchaseorder';\n}\n\n// Re-export types for external use\nexport type { PluginPanelProps, ApprovalStatusResponse } from './types';\n\n// Default export for module\nexport default { renderPanel, isPanelHidden };\n"],"names":["m","require$$0","createRoot","i","c","getStatusBadge","status","formatDate","dateStr","ApprovalHistory","approvals","jsx","Text","rows","approval","index","color","label","jsxs","Table","Badge","Stack","RequestApprovalModal","opened","onClose","onSuccess","orderId","pluginSlug","isHighValue","api","loading","setLoading","useState","error","setError","approvers","setApprovers","selectedApprover","setSelectedApprover","notes","setNotes","useEffect","loadApprovers","params","response","err","handleSubmit","approverOptions","user","Modal","LoadingOverlay","Alert","IconAlertCircle","Select","Textarea","e","Group","Button","ApprovalDecisionModal","isApprove","endpoint","ApprovalsPanel","props","context","_a","setStatus","requestModalOpen","setRequestModalOpen","approveModalOpen","setApproveModalOpen","rejectModalOpen","setRejectModalOpen","fetchStatus","useCallback","handleSuccess","Loader","IconAlertTriangle","statusColor","statusText","IconFileDescription","Fragment","IconCheck","IconX","Paper","roots","renderPanel","target","existingRoot","root","createElement","isPanelHidden"],"mappings":"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","x_google_ignoreList":[0]}